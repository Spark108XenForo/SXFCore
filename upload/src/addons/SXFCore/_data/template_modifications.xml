<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="public" template="account_details" modification_key="account_details" description="Gender" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:macro template="helper_account" name="dob_privacy_row" />]]></find>
    <replace><![CDATA[$0
<xf:macro template="sxfcore_helper_gender_edit" name="gender" arg-user="{$xf.visitor}"/>]]></replace>
  </modification>
  <modification type="public" template="custom_fields_macros" modification_key="sxfcore_extends_custom_fields_macros" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:macro name="custom_field_value"
						arg-definition="{$fieldDefinition}"
						arg-value="{$set.{$fieldDefinition.field_id}}" />]]></find>
    <replace><![CDATA[<xf:if is="$type == 'threads'">
	<xf:if is="{{ $xf.visitor.is_admin OR $xf.visitor.isMemberOf($fieldDefinition.viewable_user_group_ids) }} OR $fieldDefinition.viewable_user_group_ids == [-1]">
		$0
	<xf:else />
		{{ phrase('sxfcore_no_permission_view_value_this_field') }}
	</xf:if>
<xf:else />
	$0
</xf:if>]]></replace>
  </modification>
  <modification type="admin" template="thread_field_edit" modification_key="sxfcore_extends_thread_field_edit" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}"
			arg-supportsGroupEditable="{{ true }}"/>]]></find>
    <replace><![CDATA[<xf:macro template="sxfcore_base_custom_field_macros" name="common_options"
			arg-field="{$field}"
			arg-supportsGroupEditable="{{ true }}"
		  	arg-supportsGroupViewable="{{ true }}"/>]]></replace>
  </modification>
  <modification type="admin" template="user_edit" modification_key="user_edit" description="Gender" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:macro template="public:helper_user_dob_edit" name="dob_edit" arg-dobData="{$user.Profile}" />]]></find>
    <replace><![CDATA[$0
<xf:macro template="public:sxfcore_helper_gender_edit" name="gender" arg-user="{$user}" />]]></replace>
  </modification>
</template_modifications>
